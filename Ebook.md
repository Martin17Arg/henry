% Modulo 5 (Clases 1 a 5)
% Henry

# Clase 01 - Visualización de Datos

La visualización de datos es la representación gráfica de información y datos. Al utilizar elementos visuales como cuadros, gráficos y mapas, las herramientas de visualización de datos proporcionan una manera accesible de ver y comprender tendencias, valores atípicos y patrones en los datos.

En el mundo del big data, las herramientas y tecnologías de visualización de datos son esenciales para analizar grandes cantidades de información y tomar decisiones basadas en los datos.

Nuestros ojos son atraídos por los colores y patrones. Nuestra cultura es visual, lo que incluye todo tipo de cosas, desde arte y publicidad hasta televisión y películas.

La visualización de datos es otra forma de arte visual que capta nuestro interés y mantiene nuestros ojos en el mensaje. Cuando vemos un gráfico, vemos rápidamente las tendencias y los valores atípicos. Si podemos ver algo, lo interiorizamos rápidamente. Es contar historias con un propósito. Si alguna vez haz visto una gigantesca hoja de cálculo de datos y no te fue posible ver una tendencia, sabes cuán eficaz puede ser una visualización.

![Visual](/_src/assets/visual.PNG)


[¿Qué es la visualización de datos?](https://www.tableau.com/es-mx/learn/articles/data-visualization)

## Por qué el diseño es importante en la visualización de datos

El enfoque de  toda visualización debe estar constantemente en lograr un equilibrio entre el contenido, las imágenes y la narración para cumplir con el objetivo principal: la comunicación clara y convincente de la información. El propósito es el de facilitar al cerebro humano la comprensión y extracción de información útil. Además, el objetivo también es facilitar la identificación de patrones, tendencias y valores atípicos en grandes volúmenes de datos.

Ver (percepción) y comprender (cognición) ocurren todo el tiempo, todos los días de segundo a segundo. Cuanto más corto sea el tiempo entre ver y comprender, más efectiva será la visualización.

El cerebro humano puede procesar una pequeña cantidad de información visual muy rápidamente, pero solo por un período de tiempo muy corto. Esto se denomina memoria visual a corto plazo (VSTM).

Cada elemento en lo visual debe ser visto (percepción) dentro de aproximadamente 40 milisegundos... por más tiempo y debe procesarse atentamente (cognición). Si aprovechamos VSTM, nuestros usuarios finales pueden interpretar imágenes completas en pocos segundos.

¿Cuantos 5 puedes contar aquí?

![Prueba](/_src/assets/prueba1.PNG)

¿En esta imagen?

![Prueba](/_src/assets/prueba2.PNG)

¿Ha aumentado o disminuido el Volumen Bruto de Mercaderías en los últimos cinco años? Y... ¿Qué categoría ha crecido más rápido?

![Volumen](/_src/assets/ej1.PNG)

Quizás con este gráfico resulte más sencillo determinarlo.

![Volumen](/_src/assets/ej2.PNG)

Hacer uso de VSTM requiere que sepamos qué funciona y qué no cuando ocurre el procesamiento visual. Los atributos que funcionan bien con VSTM se denominan características visuales predispectas.

Por ejemplo, cuando los datos se representan de forma visual, podemos detectar rápidamente comportamientos que podrían pasar desapercibidos si los vemos estadísticamente. Tiene sentido que la visualización de datos nos dé más significado, ya que el 90% de la información transmitida al cerebro humano es visual. También procesamos imágenes visuales 60.000 veces más rápido que el texto, ya que al cerebro le resulta más fácil recordarlas y analizarlas.

![Brain](/_src/assets/brain.PNG)

Hay diversos estudios psicológicos que demuestran que si tenemos delante una tarea cognitiva exigente y una tentación, es más probable que caigamos en la tentación. 
El psicólogo Roy Baumeister, pionero en esta teoría, define el “agotamiento del ego” ha demostrado que la energía mental no es una metáfora en sí, sino que realmente responde como un esfuerzo físico.

Un estudio publicado en los Proceedings of the National Academy of Sciences demuestra la correlación entre el grado de agotamiento entre jueces y sus decisiones sobre peticiones de libertad condicional. Después de las comidas, se aprobaban más peticiones, mientras que peticiones revisadas antes de la hora de comer tendían a ser denegadas en mayor proporción. Jueces cansados y hambrientos tienden a tomar la decisión más fácil y común de denegar la petición. Y ¡ojo! que hablo de correlación pero no de causalidad, pues no se llegó a demostrar que este fuera el motivo, aunque parece el más probable.

[Agotamiento del ego](https://psicologiaymente.com/psicologia/teoria-agotamiento-del-ego)

La presentación visual de la información afecta a su legibilidad, comprensión y memorización.

Los siguientes atributos son los puntos de partida que construyen buenas prácticas:
- accesible
- adecuado
- creíble
- íntegro
- conciso
- oportuno
- comprensible
- valioso

## Y... ¿cómo lo aplicamos?

En primer lugar, necesitamos saber la diferencia entre la percepción y la cognición. Hay una gran diferencia entre estos conceptos, y es importante entenderlos en términos de cómo funciona el cerebro humano. Entonces podríamos ver cómo aplicar eso dentro de un tablero.

La percepción es la organización, identificación e interpretación de los estímulos de tus sentidos. Una forma sencilla de describirlo es como la adquisición de información a través de los sentidos.

La cognición es el procesamiento de la información y la adquisición de conocimiento a través de la razón, la intuición y la percepción. Una forma más simple de pensar en ello es como el procesamiento de la percepción en conocimiento.

La principal diferencia entre esos términos es que la percepción es rápida, mientras que la cognición es mucho más lenta. Cuando los patrones no se pueden percibir de manera rápida y sencilla, el usuario comienza a experimentar un "esfuerzo cognitivo".

El término “esfuerzo cognitivo” hace referencia a la sensación percibida al enfrentarnos a tareas mentales difíciles. Los estudios en este campo señalan una tendencia de las personas a preferir tareas sencillas, asociadas a una baja demanda de control cognitivo.

[Realiza este test de atención](https://www.youtube.com/watch?v=PbVYH8FCLvo&t=47s)

## Patrones visuales

Los usuarios finales no miran los paneles, los escanean.

Como desarrolladores y diseñadores, tenemos mucho control sobre lo que nuestros usuarios miran al ver un tablero. Para crear el camino correcto que los ojos del usuario van a seguir, primero necesitamos entender cómo nuestros ojos procesan la información.

¿Cómo le damos sentido a lo que vemos?

Hay varias categorías de procesamiento pre-atento; exploremos algunos:

![Patrones](/_src/assets/patrones.PNG)

Los patrones visuales o (jerarquías visuales) nos permiten saber qué datos involucran primero a nuestros usuarios y con qué visualizaciones interactúan (y en qué orden) mientras están en el tablero. Al establecer una jerarquía visual, nos aseguramos de que la comunicación entre nuestros usuarios y los paneles sea fluida teniendo en cuenta las siguientes técnicas:

- Escala: Los elementos de diferentes tamaños guiarán la atención del usuario: los elementos más grandes atraen más atención en comparación con los elementos más pequeños.
- Color: La gente se siente atraída hacia colores audaces y contrastantes.
- Contraste: Los cambios de color se pueden utilizar para atraer la atención. Contrastar el color de un elemento contra otro atrae el foco.
- Alineación: Las columnas y las cuadrículas pueden crear alineación entre los elementos y hacer que el usuario se dé cuenta.
- Proximidad: Esto ayuda a separar y agrupar ciertos elementos de visualización de datos juntos (o separados) para ayudar a distinguir entre ellos.
- Patrones de escaneo: Los estudios de seguimiento ocular muestran dónde los usuarios enfocan su mirada una vez que están en un tablero y dónde proceden después.

Y... hablando de patrones de escaneo, es importante mencionar que existe más de un tipo, el que más usamos -o recomendamos- a la hora de diseñar es el diseño Z-Pattern.

Este tipo de patrón es un concepto de diseño que considera que los usuarios tienden a ver información altamente visual en un Z-Pattern. es decir, tienden a:
- primero mire la parte superior izquierda y luego muévase horizontalmente hacia la parte superior derecha.
- luego dibuja sus ojos en diagonal hacia la parte inferior izquierda.
- y por último, hacer un último movimiento horizontal hacia la parte inferior derecha.

![Patrones Z](/_src/assets/z.PNG)

## Elección de gráficos

Quizás sea el más conocido, se basa en un diagrama de selección de gráficos creado en 2009 por el Dr. Andrew Abela como parte del método Extreme Presentation.

Todo comienza preguntándose qué se desea representar con los datos, y según la respuesta los gráficos se pueden agrupar en cuatro tipos principales:

- Comparación: cuando queremos comparar entre sí los diferentes valores o atributos dentro de los datos. Existen algunas variantes, según sean los datos. Por ejemplo, ¿Tienen los datos la variable tiempo? ¿Cuántos periodos de tiempo? ¿Cuántas variables y categorías presentan los datos?.
- Composición: cuando queremos saber cómo están compuestos los datos, es decir, qué características generales están presentes en el conjunto de datos. Existen algunas variantes, según sean los datos. Por ejemplo, ¿Se tienen cambios a lo largo del tiempo? ¿Con cuántos periodos de tiempo? En datos estáticos, ¿se tienen valores que se acumulan?
- Distribución: cuando queremos comprender cómo se distribuyen los puntos de datos individuales dentro de todo el juego de datos. Según el número de variables en las que queramos analizar la distribución se elegirán gráficos de barras, líneas o gráficos de dispersión (scatter charts).
- Relación: en este caso estamos interesados en saber cómo los valores y atributos se relacionan entre sí. Para enfrentar los valores se suelen usar gráficos de dispersión (scatter charts) cuando intervienen dos variables y gráficos de burbujas (bubble charts) cuando intervienen tres variables.
De estos cuatro tipos, lo más probable en la mayoría de casos es que principalmente se utilicen los dos primeros, Comparación y Composición, a no ser que se tengan necesidades de análisis estadístico avanzadas.

Como puedes ver la mayoría de los casos se pueden solucionar con unos pocos tipos de gráficos básicos, aunque pueden aplicarse múltiples variantes para cada caso concreto. Podemos decir que los gráficos más usados son los de barras y líneas en todas sus variantes (horizontal o vertical, simple o apiladas, etc.). Cuando se requiere un gran detalle se suele recurrir a la tabla de datos.

![Graficos](/_src/assets/graficos.png)

## Herramientas de visualización

![Herramientas](https://qlik.imgix.net//-/media/images/global-us/site-content/gartner-mq-landing/2022/2022damqqlikcomreg635x635.jpg?fit=crop&auto=format&fit=max&dpr=1)

## Power BI
Power BI es una colección de servicios de software, aplicaciones y conectores que funcionan conjuntamente para convertir orígenes de datos sin relación entre sí en información coherente, interactiva y atractiva visualmente. Power BI permite conectarse con facilidad a los orígenes de datos y aplicar procesos de transformación sencillos sin recurrir a ETL complejos.

Power BI consta de varios elementos que funcionan de manera conjunta, empezando por estos tres conceptos básicos:

- Aplicación de escritorio de Windows llamada Power BI Desktop.
- Servicio SaaS (software como servicio) en línea denominado "Servicio de Power BI".
- Aplicaciones móviles de Power BI para dispositivos Windows, iOS y Android.

Estos tres elementos (Power BI Desktop, el servicio y las aplicaciones móviles) están diseñados para crear, compartir y usar información empresarial de la forma que le resulte más eficaz para usted y para su rol.

![Flujo de trabajo](https://docs.microsoft.com/es-es/power-bi/fundamentals/media/service-service-vs-desktop/power-bi-venn-desktop-service.png)

## El flujo de trabajo en Power BI
Un flujo de trabajo habitual en Power BI comienza con la conexión a orígenes de datos en Power BI Desktop y la creación de un informe. Después, ese informe se publica desde Power BI Desktop en el servicio Power BI y se comparte para que los usuarios profesionales del servicio Power BI y los dispositivos móviles puedan verlo e interactuar con él.

Este flujo de trabajo es habitual y muestra cómo los tres elementos principales de Power BI se complementan entre sí.

## Power BI Desktop

Power BI Desktop es una aplicación gratuita que se puede instalar en el equipo local y que permite conectarse a los datos, transformarlos y visualizarlos. Con Power BI Desktop, puede conectarse a varios orígenes de datos diferentes y combinarlos (lo que se suele denominar modelado) en un modelo de datos. Este modelo de datos permite compilar objetos visuales y colecciones de objetos visuales que se pueden compartir como informes con otras personas de dentro de la organización. La mayoría de los usuarios que trabajan en proyectos de inteligencia empresarial usan Power BI Desktop para crear informes y luego usan el servicio Power BI para compartir los informes con otros.

Los usos más comunes de Power BI Desktop son los siguientes:<br>
- Conectar a datos
- Transformar y limpiar datos, para crear un modelo de datos
- Crear objetos visuales, como gráficos o grafos, que proporcionan representaciones visuales de los datos
- Crear informes que son colecciones de objetos visuales, en una o varias páginas de informes
- Compartir informes con otros usuarios mediante el servicio Power BI

En Power BI Desktop hay tres vistas disponibles, que se seleccionan en el lado izquierdo del lienzo. Las vistas, que se muestran en el orden en que aparecen, son las siguientes:

- Informe: en esta vista se crean informes y objetos visuales y es donde se pasa la mayor parte del tiempo de creación.
- Datos: en esta vista se ven las tablas, las medidas y los demás datos que se usan en el modelo de datos asociado al informe y se transforman los datos para usarlos de la mejor manera posible en el modelo del informe.
- Modelo: en esta vista se ven y se administran las relaciones entre las tablas del modelo de datos.

## Conectar a datos

Para empezar a trabajar con Power BI Desktop, el primer paso es conectarse a los datos. Hay muchos orígenes de datos distintos a los que es posible conectarse desde Power BI Desktop.

En la cinta Inicio, seleccione Obtener datos > Más.

Aparece la ventana Obtener datos, que muestra muchas categorías a las que Power BI Desktop puede conectarse.

![Conexión a fuentes](https://docs.microsoft.com/es-es/power-bi/fundamentals/media/desktop-what-is-desktop/what-is-desktop_02.png)

![Vista Power BI](https://docs.microsoft.com/es-es/power-bi/fundamentals/media/desktop-what-is-desktop/what-is-desktop-07.png)

![Power BI](https://docs.microsoft.com/es-es/power-bi/fundamentals/media/power-bi-overview/power-bi-overview-blocks.png)

## Material complementario

### Visualización de Datos

[Data Storytelling - Cole Nussbaumer](/Libros/storytelling-with-data-cole-nussbaumer-knaflic.pdf)

[Diagrama de selección original](https://extremepresentation.typepad.com/files/choosing-a-good-chart-09.pdf)

[Elección de gráficos](https://infogram.com/es/pagina/elige-el-grafico-correcto-visualizacion-datos)

[Gráficos por tipo de función](https://www.data-to-viz.com/#portfolio)

[Catalogo de gráficos](https://datavizcatalogue.com/)

### Herramientas de visualización

[Vitual Box - MAC](https://www.youtube.com/watch?v=V3b76U46fBU)

[Windows 10 y Virtual Box - MAC](https://www.youtube.com/watch?v=WbpE9euPcJY)

[Guía de descarga e instalación de Power BI](https://docs.microsoft.com/es-es/power-bi/fundamentals/desktop-get-the-desktop#download-power-bi-desktop-directly)

[Introducción a Power BI](https://powerbi.microsoft.com/es-es/getting-started-with-power-bi/)

# Clase 02 - Introducción a Power BI Desktop

[Documentación oficial](https://docs.microsoft.com/en-us/power-bi/fundamentals/desktop-getting-started)

## Crear informes
En la vista Informe de Power BI Desktop, puede crear visualizaciones e informes. La vista del Informe tiene seis áreas principales:

![Informe](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/designer_gsg_reportview.png)

1. La cinta de opciones en la parte superior, que muestra las tareas comunes asociadas con informes y visualizaciones.
2. El área del lienzo en el medio, donde se crean y organizan las visualizaciones.
3. El área de pestaña páginas en la parte inferior, que le permite seleccionar o agregar páginas de informe.
4. El panel Filtros, donde puede filtrar visualizaciones de datos.
5. El panel Visualizaciones, donde puede agregar, cambiar o personalizar visualizaciones y aplicar detalles.
6. El panel Campos, que muestra los campos disponibles en las consultas. Puede arrastrar estos campos al lienzo, al panel Filtros o al panel Visualizaciones para crear o modificar visualizaciones.

Para crear una visualización simple, simplemente seleccione cualquier campo de la lista de campos o arrastre el campo de la lista Campos al lienzo. Por ejemplo, arrastre el campo Estado de Mejores estados para ventas de gafas de sol al lienzo y vea qué sucede.

![Informe2](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/designer_gsg_reportfirstdrag.png)

Power BI Desktop puede reconocer facilmente el tipo de datos que representa un campo y crear automáticamente una visualización basada en ellos.

El panel Visualizaciones muestra información sobre la visualización y le permite modificarla.

![Panel](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/designer_gsg_visualizationtypes.png)

1. Los iconos muestran el tipo de visualización creada. Puede cambiar el tipo de una visualización seleccionada seleccionando un icono diferente o crear una nueva visualización seleccionando un icono sin visualización existente seleccionada.
2. La opción Campos del panel Visualización permite arrastrar campos de datos a Leyenda y otros pozos de campo del panel.
3. La opción Formato le permite aplicar formato y otros controles a las visualizaciones.

El panel de filtros, permite establecer criterios de segmentación a cada objeto visual, a toda la página o a varias páginas. Puede aplicar filtros básicos (seleccionando elementos), avanzados (mediante reglas relacionales) o TOP N.

![Filtros](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/gsg_share5.png)

El panel de visualizaciones le permite configurar cada objeto visual, este panel se divide en opciones de objetos visuales, formato y análitica.
A vez el la primer pestaña se divide en objetos visuales, valores y obtener detalles. Dentro de la pestaña de formato, encontrara las opciones para cambiar la apariencia de cada objeto visual, las opciones serán distintas dependiendo del tipo de objeto elegido. En la pestaña de análisis podrá encontrar algunas herramientas estadísticas que puede incorporar a su objeto visual.

[Pestaña de análisis](https://docs.microsoft.com/en-us/power-bi/transform-model/desktop-analytics-pane)

![Visual](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/designer_gsg_report1.png)

Cuando se posiciona sobre algun objeto visual, podrá observar tres puntos que aparcen en el margen superior derecho, haciendo clic allí puede entre otras cosas: exportar los datos que conforman ese objeto visual, cambiar el orden de la clasificación o mostrar un detalle de los datos como una tabla.

![Opciones](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/shapecombine_mergequeries.png)

Puede mostrar diferentes visualizaciones en diferentes páginas de informes. Para agregar una nueva página, seleccione el símbolo + junto a las páginas existentes en la barra de páginas o seleccione Insertar > nueva página en la pestaña Inicio de la cinta de opciones. Para cambiar el nombre de una página, haga doble clic en el nombre de la página en la barra de páginas o haga clic con el botón secundario en él y seleccione Cambiar nombre de página y, a continuación, escriba el nuevo nombre. Para ir a una página diferente del informe, seleccione la página en la barra de páginas.

![Páginas](https://docs.microsoft.com/en-us/power-bi/fundamentals/media/desktop-getting-started/pages.png)

### Tipos de Visualizaciones

#### [Objetos visuales](https://docs.microsoft.com/en-us/power-bi/visuals/power-bi-visualization-types-for-reports-and-q-and-a)
#### [Agregar una visualización](https://docs.microsoft.com/en-us/power-bi/visuals/power-bi-report-add-visualizations-i)
#### [Dar formato a un objeto visual](https://docs.microsoft.com/en-us/power-bi/visuals/power-bi-visualization-customize-title-background-and-legend)
#### [Opciones de color](https://docs.microsoft.com/en-us/power-bi/visuals/service-tips-and-tricks-for-color-formatting)
#### [Navegar en objetos visuales](https://docs.microsoft.com/en-us/power-bi/consumer/end-user-drill)
#### [Crear un tooltip](https://docs.microsoft.com/en-us/power-bi/create-reports/desktop-tooltips?tabs=powerbi-desktop)

#### [Guía práctica para visualizaciones](https://docs.microsoft.com/en-us/power-bi/create-reports/)

### Filtros y segmentaciones

#### [Agregar filtros desde el panel](https://docs.microsoft.com/en-us/power-bi/create-reports/power-bi-report-add-filter?tabs=powerbi-desktop)
#### [Slicer](https://docs.microsoft.com/en-us/power-bi/visuals/power-bi-visualization-slicers)
#### [Filtros de fecha](https://docs.microsoft.com/en-us/power-bi/create-reports/slicer-filter-relative-time?tabs=powerbi-desktop)

### Actualizaciones
Power BI es un producto que esta en constante evolución, posee actualizaciones mensuales que incorporán cambios significativos a la herramienta, el el siguiente link podrá ver los cambios que se han incorporado a cada versión:

[Actualizaciones](https://docs.microsoft.com/en-us/power-bi/fundamentals/desktop-latest-update-archive?tabs=powerbi-desktop)


# Clase 03 - Power Query

El editor de Power Query representa la interfaz de usuario de Power Query, donde puede agregar o modificar consultas, administrar consultas agrupando o agregando descripciones a los pasos de consulta o visualizar las consultas y su estructura con diferentes vistas. La interfaz de usuario de Power Query tiene cinco componentes distintos.

![Editor](https://docs.microsoft.com/en-us/power-query/media/power-query-ui/pqui-user-interface.png)

1. Cinta de opciones: la experiencia de navegación de la cinta de opciones, que proporciona varias pestañas para agregar transformaciones, seleccionar opciones para su consulta y acceder a diferentes botones de la cinta para completar varias tareas.
2. Panel de consultas: una vista de todas las consultas disponibles.
3. Vista actual: su vista de trabajo principal, que de forma predeterminada, muestra una vista previa de los datos de su consulta.
4. Configuración de consulta: una vista de la consulta seleccionada actualmente con información relevante, como el nombre de la consulta, los pasos de la consulta y varios indicadores.
5. Barra de estado: una barra que muestra información importante relevante sobre la consulta, como el tiempo de ejecución, el total de columnas y filas, y el estado de procesamiento. Esta barra también contiene botones para cambiar la vista actual.

## La cinta de opciones
La cinta de opciones es el componente donde encontrará la mayoría de las transformaciones y acciones que puede realizar en el editor de Power Query. Tiene múltiples pestañas, cuyos valores dependen de la integración del producto. Cada una de las pestañas proporciona botones y opciones específicos, algunos de los cuales pueden ser redundantes en toda la experiencia de Power Query. Estos botones y opciones le proporcionan un fácil acceso a las transformaciones y acciones que pueda necesitar.

![Cinta](https://docs.microsoft.com/en-us/power-query/media/power-query-ui/standard-ribbon.png)


[Power Query](https://docs.microsoft.com/en-us/power-query/power-query-ui)

## Elaboración de perfiles de datos

Otra característica de Power Query que puede ayudarle a comprender mejor sus datos es la generación de perfiles de datos. Al habilitar las funciones de generación de perfiles de datos, obtendrá comentarios sobre los datos dentro de los campos de consulta, como la distribución de valores, la calidad de la columna y más.

Le recomendamos que utilice esta función durante todo el desarrollo de sus consultas, pero siempre puede habilitar y deshabilitar la función a su conveniencia. La siguiente imagen muestra todas las herramientas de generación de perfiles de datos habilitadas para la consulta de análisis de país.

[Perfiles de datos](https://docs.microsoft.com/en-us/power-query/media/power-query-ui/pqui-data-profiling.png)

## El editor avanzado

Si desea observar el código que el editor de Power Query está creando con cada paso, o desea crear su propio código de conformación, puede usar el editor avanzado. Para abrir el editor avanzado, seleccione la pestaña Ver en la cinta de opciones y, a continuación, seleccione Editor avanzado. Aparece una ventana que muestra el código de consulta existente.## Homework

[Editor](https://docs.microsoft.com/en-us/power-query/media/power-query-ui/queryoverview_advancededitor.png)

## Pasos aplicados

Cada transformación que se aplica a la consulta se guarda como un paso en la sección Pasos aplicados del panel de configuración de la consulta. Si alguna vez necesita comprobar cómo se transforma la consulta de paso a paso, puede seleccionar un paso y obtener una vista previa de cómo se resuelve la consulta en ese momento específico.

También puede hacer clic con el botón secundario en una consulta y seleccionar la opción Propiedades para cambiar el nombre de la consulta o agregar una descripción para la consulta.

## Agregar una nueva columna

Con los datos de clientes y proveedores en una sola tabla, ahora puede calcular la proporción de clientes a proveedores para cada país. Seleccione el último paso de la consulta Análisis de país y, a continuación, seleccione las columnas Clientes y Proveedores. En la pestaña Agregar columna de la cinta de opciones y dentro del grupo de números De, seleccione Estándar y, a continuación, Dividir (entero) en el menú desplegable.

## Uso de la lista Pasos aplicados

Cualquier transformación en sus datos se mostrará en la lista Pasos aplicados. Por ejemplo, si cambia el nombre de una columna, se mostrará en la lista Pasos aplicados como Columnas renombradas.<br>
Al seleccionar cualquier paso, se le mostrarán los resultados de ese paso en particular, para que pueda ver exactamente cómo cambian sus datos a medida que agrega pasos a la consulta.

![Pasos](https://docs.microsoft.com/en-us/power-query/images/applied-steps-new-column-name.png)

Para eliminar un paso, haga clic con el botón secundario en el paso y seleccione Eliminar.

![Eliminar](https://docs.microsoft.com/en-us/power-query/images/applied-steps-delete.png)

Para editar el paso, haga clic con el botón secundario en el paso y seleccione Propiedades.

[Editar](https://docs.microsoft.com/en-us/power-query/applied-steps)

![Propiedades](https://docs.microsoft.com/en-us/power-query/images/applied-steps-properties.png)

Para cambiar el nombre de un paso, haga clic con el botón secundario en el paso y seleccione Cambiar nombre.

![Nombre](https://docs.microsoft.com/en-us/power-query/images/applied-steps-rename.png)


## Herramientas de Power Query
Dentro de la documentación oficial de Power Query, encontraras una sección específica para la "Transformación de datos" y dentro de esta sección herramientas para transformar tablas y columnas, agregar columnas, combinar datos y dividir columnas.<br>
Te recomendamos leer al menos las siguientes herramientas que te serán útiles a la hora de realizar transformaciones en Power Query:<br>

### [Documentación Oficial - Power Query](https://docs.microsoft.com/en-us/power-query/)


#### [Promover encabezados](https://docs.microsoft.com/en-us/power-query/table-promote-demote-headers)

#### [Elegir o quitar columnas](https://docs.microsoft.com/en-us/power-query/choose-remove-columns) 

#### [Tipos de datos](https://docs.microsoft.com/en-us/power-query/data-types)

#### [Errores](https://docs.microsoft.com/en-us/power-query/dealing-with-errors)

#### [Reemplazar valores](https://docs.microsoft.com/en-us/power-query/replace-values)

#### [Agregar columna personalizada](https://docs.microsoft.com/en-us/power-query/add-custom-column)

#### [Columna condicional](https://docs.microsoft.com/en-us/power-query/add-conditional-column)

#### [Anexar consultas](https://docs.microsoft.com/en-us/power-query/append-queries)

#### [Combinar consultas](https://docs.microsoft.com/en-us/power-query/merge-queries-overview)

# Clase 04 - Power Query Avanzado

Power Query proporciona una potente experiencia de "obtención de datos" que abarca muchas características. Una capacidad principal de Power Query es filtrar y combinar, es decir, "mezclar" datos de uno o más de una rica colección de orígenes de datos compatibles. Cualquier mashup de datos de este tipo se expresa utilizando el lenguaje de fórmulas de Power Query (conocido informalmente como "M"). Power Query incrusta documentos M en libros de Excel y Power BI para habilitar la combinación repetible de datos.

Este documento proporciona la especificación para M. Después de una breve introducción que tiene como objetivo construir una primera intuición y familiaridad con el idioma, el documento cubre el lenguaje precisamente en varios pasos progresivos:

- La estructura léxica define el conjunto de textos que son léxicamente válidos.
- Valores, expresiones, entornos y variables, identificadores y el modelo de evaluación forman los conceptos básicos del lenguaje.
- La especificación detallada de los valores, tanto primitivos como estructurados, define el dominio de destino del lenguaje.
- Los valores tienen tipos, en sí mismos un tipo especial de valor, que caracterizan los tipos fundamentales de valores y llevan metadatos adicionales que son específicos de las formas de los valores estructurados.
- El conjunto de operadores en M define qué tipos de expresiones se pueden formar.
- Las funciones, otro tipo de valores especiales, proporcionan la base para una rica biblioteca estándar para M y permiten la adición de nuevas abstracciones.
- Pueden producirse errores al aplicar operadores o funciones durante la evaluación de la expresión. Si bien los errores no son valores, hay formas de controlar los errores que asignan los errores a los valores.
- Permita que las expresiones permitan la introducción de definiciones auxiliares utilizadas para crear expresiones complejas en pasos más pequeños.
- Si las expresiones admiten la evaluación condicional.
- Las secciones proporcionan un mecanismo de modularidad simple. (Power Query aún no aprovecha las secciones).
- Finalmente, una gramática consolidada recoge los fragmentos gramaticales de todas las demás secciones de este documento en una sola definición completa.

Para ver un detalle de cada punto puede ingresar aquí:

[Introducción a M](https://docs.microsoft.com/en-us/powerquery-m/m-spec-introduction).

## Funciones
En M, una función es una asignación de un conjunto de valores de entrada a un único valor de salida. Una función se escribe nombrando primero el conjunto requerido de valores de entrada (los parámetros de la función) y luego proporcionando una expresión que calculará el resultado de la función utilizando esos valores de entrada (el cuerpo de la función) después del símbolo =>. 

Cuando nos referimos a una función predeterminada, hablamos de un valor que representa una asignación de un conjunto de valores de argumento a un solo valor. Una función se invoca proporcionando un conjunto de valores de entrada (los valores del argumento) y produce un único valor de salida (el valor devuelto).

Una consulta de lenguaje de fórmula M de Power Query se compone de pasos de expresión de fórmula que crean una consulta de mashup. Una expresión de fórmula puede ser evaluada (calculada), produciendo un valor. La expresión let encapsula un conjunto de valores que se van a calcular, se asignan nombres y, a continuación, se usan en una expresión posterior que sigue a la instrucción in. Por ejemplo, una expresión let podría contener una variable Source que sea igual al valor de Text.Proper() y produzca un valor de texto en mayúsculas y minúsculas.

```M
let  
    Source = Text.Proper("hello world")  
in  
    Source  
```

## Biblioteca
M incluye un conjunto común de definiciones disponibles para su uso desde una expresión llamada biblioteca estándar (al igual que las funciones en Excel), o simplemente biblioteca para abreviar. Estas definiciones consisten en un conjunto de valores con nombre.

La documentación de las funciones M de Power Query incluye artículos para cada una de las más de 700 funciones. Algunas de las más importantes son las que nos permiten acceder a fuentes de datos:
- [Web Contents](https://docs.microsoft.com/en-us/powerquery-m/web-contents)
Esta función permite conexiones a API´s y entender su funcionamiento ayuda a extraer datos disponibilizados mediante ellas.

- [XML Tables](https://docs.microsoft.com/en-us/powerquery-m/xml-tables). 
- [JSON Document](https://docs.microsoft.com/en-us/powerquery-m/json-document).
- [CSV Document](https://docs.microsoft.com/en-us/powerquery-m/csv-document).

También existe una categoría de funciones de listas, que nos permiten utilizar los datos de una fuente como argumentos en otra consulta:

[Lista Dates](https://docs.microsoft.com/en-us/powerquery-m/list-dates).
[List Max](https://docs.microsoft.com/en-us/powerquery-m/list-max).
[List Min](https://docs.microsoft.com/en-us/powerquery-m/list-min).
[Lista Range](https://docs.microsoft.com/en-us/powerquery-m/list-range).
[Lista Generate](https://docs.microsoft.com/en-us/powerquery-m/list-generate).

Los argumentos de una función en M pueden ser reemplazados por parámetros, esto permite que dicho argumento pueda ser dinpamico o reemplazado de manera sencilla.
[Parámetros en M](https://docs.microsoft.com/en-us/power-bi/connect-data/desktop-dynamic-m-query-parameters)

Simpre debe tener en cuenta que M es un lenguaje que distingue entre mayúsculas y minúsculas.

## Consultas avanzadas

Para crear una consulta avanzada, utilice el Editor de consultas. Una consulta de mashup se compone de variables, expresiones y valores encapsulados por una expresión let. Una variable puede contener espacios utilizando el identificador # con el nombre entre comillas como en #"Nombre de variable".

Una expresión let sigue esta estructura:

```M
let  
   Variablename = expression,  
   #"Variable name" = expression2  
in   
   Variablename
```

Para crear una consulta M en el Editor de consultas, siga este proceso básico:

- Cree una serie de pasos de fórmula de consulta que comiencen con la instrucción let. Cada paso está definido por un nombre de variable de paso. Una variable M puede incluir espacios utilizando el carácter # como #"Nombre del paso". Un paso de fórmula puede ser una fórmula personalizada. Tenga en cuenta que el lenguaje de fórmulas de Power Query distingue entre mayúsculas y minúsculas.
- Cada paso de la fórmula de consulta se basa en un paso anterior haciendo referencia a un paso por su nombre de variable.
- Genere un paso de fórmula de consulta mediante la instrucción in. Generalmente, el último paso de consulta se utiliza como resultado final del conjunto de datos.


[Condicionales en M](https://docs.microsoft.com/en-us/powerquery-m/m-spec-conditionals)

[Recorrido por M](https://docs.microsoft.com/en-us/powerquery-m/quick-tour-of-the-power-query-m-formula-language)

[Expresiones en M](https://docs.microsoft.com/en-us/powerquery-m/expressions-values-and-let-expression)

## Modelo relacional Power BI

### Crear y administrar relaciones en Power BI Desktop

Cuando se importan varias tablas, es probable que se realice algún análisis utilizando datos de todas esas tablas. Las relaciones entre esas tablas son necesarias para calcular con precisión los resultados y mostrar la información correcta en los informes. Power BI Desktop facilita la creación de esas relaciones. De hecho, en la mayoría de los casos no tendrá que hacer nada, la función de detección automática lo hace por usted. Sin embargo, a veces es posible que tenga que crear relaciones usted mismo o que necesite hacer cambios en una relación. De cualquier manera, es importante comprender las relaciones en Power BI Desktop y cómo crearlas y editarlas.

### Detección automática durante la carga
Si consulta dos o más tablas al mismo tiempo, cuando se cargan los datos, Power BI Desktop intenta buscar y crear relaciones por usted. Las opciones de relación Cardinalidad, Dirección de filtro cruzado y Activar esta relación se establecen automáticamente. Power BI Desktop examina los nombres de columna de las tablas que está consultando para determinar si hay relaciones potenciales. Si las hay, esas relaciones se crean automáticamente. Si Power BI Desktop no puede determinar con un alto nivel de confianza que hay una coincidencia, no crea la relación. Sin embargo, aún puede utilizar el cuadro de diálogo Administrar relaciones para crear o editar relaciones manualmente.

![Relaciones](/_src/assets/relaciones.gif)

Es importante destacar que muchas veces, las relaciones creadas por Power BI, no suelen ser las esperadas. Por eso es muy importante observar el modelo final y realizar las correcciones necesarias.

### Crear una relación manualmente

En la pestaña Modelado, seleccione Administrar relaciones > Nuevo.

En el cuadro de diálogo Crear relación, en la lista desplegable primera tabla, seleccione una tabla. Seleccione la columna que desea utilizar en la relación.

En la segunda lista desplegable de tablas, seleccione la otra tabla que desee en la relación. Seleccione la otra columna que desea usar y, a continuación, seleccione Aceptar.

![Relaciones 2](/_src/assets/relaciones2.gif)

### Cardinalidad

La opción Cardinalidad puede tener una de las siguientes configuraciones:

Muchos a uno (*:1):Una relación de muchos a uno es el tipo de relación más común y predeterminado. Significa que la columna de una tabla dada puede tener más de una instancia de un valor, y la otra tabla relacionada, a menudo conocida como la tabla de búsqueda, tiene solo una instancia de un valor.

Uno a uno (1:1): En una relación uno a uno, la columna de una tabla tiene solo una instancia de un valor particular, y la otra tabla relacionada tiene solo una instancia de un valor particular.

Uno a muchos (1:*): En una relación de uno a muchos, la columna de una tabla tiene solo una instancia de un valor determinado, y la otra tabla relacionada puede tener más de una instancia de un valor.

Muchos a muchos (*:*):Con los modelos compuestos, puede establecer una relación de muchos a muchos entre tablas, lo que elimina los requisitos para valores únicos en las tablas. También elimina soluciones anteriores, como la introducción de nuevas tablas solo para establecer relaciones. Para obtener más información, consulte Relaciones con una cardinalidad de muchos-muchos.

Para obtener más información acerca de cuándo cambiar la cardinalidad, consulte Descripción de las opciones adicionales.

### Dirección del filtro cruzado

La opción Dirección de filtro cruzado puede tener una de las siguientes configuraciones:

Ambos: Para fines de filtrado, ambas tablas se tratan como si fueran una sola tabla. La configuración Ambos funciona bien con una sola tabla que tiene muchas tablas de búsqueda que la rodean. Un ejemplo es una tabla de datos reales de ventas con una tabla de búsqueda para su departamento. Esta configuración a menudo se denomina configuración de esquema en estrella (una tabla central con varias tablas de búsqueda). Sin embargo, si tiene dos o más tablas que también tienen tablas de búsqueda (con algunas en común), entonces no querrá usar la configuración Ambos. Para continuar con el ejemplo anterior, en este caso, también tiene una tabla de ventas de presupuesto que registra el presupuesto objetivo para cada departamento. Y, la tabla del departamento está conectada tanto a la tabla de ventas como a la tabla de presupuesto. Evite la opción Ambos para este tipo de configuración.

Único: la dirección predeterminada más común, lo que significa que las opciones de filtrado en las tablas conectadas funcionan en la tabla donde se agregan los valores. Si importa un power pivot en Excel 2013 o un modelo de datos anterior, todas las relaciones tendrán una sola dirección.

Para obtener más información acerca de cuándo cambiar la dirección del filtro cruzado, consulte Descripción de las opciones adicionales.

### Propósito de la relación

Una relación de modelo propaga los filtros aplicados en la columna de una tabla de modelo a una tabla de modelo diferente. Los filtros se propagarán siempre que haya una ruta de relación a seguir, lo que puede implicar la propagación a varias tablas.

Las rutas de relación son deterministas, lo que significa que los filtros siempre se propagan de la misma manera y sin variación aleatoria. Sin embargo, las relaciones pueden deshabilitarse o modificar el contexto del filtro mediante cálculos de modelos que utilizan funciones DAX concretas (concepto que veremos más adelante).

Las relaciones de modelo no imponen la integridad de los datos. Para obtener más información, vea el tema Evaluación de relaciones más adelante en este artículo, que explica cómo se comportan las relaciones de modelo cuando hay problemas de integridad de datos con los datos.

![Modelos](/_src/assets/filtro.gif)

Este tema te ayudará a genera mejores modelos análiticos en Power BI, por eso es importante que profundizes con la documentación oficial:

[Relaciones en Power BI](https://docs.microsoft.com/en-us/power-bi/transform-model/desktop-create-and-manage-relationships)

## Homework Clase 04

1. Siguiendo el siguiente tutorial, conecte Power BI a la [API del Banco Mundial](https://datahelpdesk.worldbank.org/knowledgebase/topics/125589) y obtenga los resultados de cada página.
[Link ARCHIVO](http://api.worldbank.org/v2/country) 
[Link página](http://api.worldbank.org/v2/country?page=1) 
[Tutorial sobre paginación - Power BI](https://www.youtube.com/watch?v=g5bo_UAQjIE)

2. Agregar al archivo anterior una conexión a la [API de football-data](https://www.football-data.org/), siguiendo este tutorial:
[Tutorial - API Token](https://www.youtube.com/watch?v=b8zalXP2YWU) 
[Football API](http://api.football-data.org/v2/teams/18) 

3. Aplicar las transformaciones y crear las relaciones necesarias para presentar la cantidad de selecciones que participaron en el mundial del año 2000.

4. Agregar un calendario desde Power Query al modelo creado la clase pasada.
[Calendario en Power Query](https://www.youtube.com/watch?v=cK0ksjyEc-I)

5. Interpretar el siguiente script en SQL y agregar una columna personalizada dentro del modelo de la clase pasada.

```SQL
ALTER TABLE `cliente` ADD `Rango_Etario` VARCHAR(20) NOT NULL DEFAULT '-' AFTER `Edad`;

UPDATE cliente SET Rango_Etario = '1_Hasta 30 años' WHERE Edad <= 30;
UPDATE cliente SET Rango_Etario = '2_De 31 a 40 años' WHERE Edad <= 40 AND Rango_Etario = '-';
UPDATE cliente SET Rango_Etario = '3_De 41 a 50 años' WHERE Edad <= 50 AND Rango_Etario = '-';
UPDATE cliente SET Rango_Etario = '4_De 51 a 60 años' WHERE Edad <= 60 AND Rango_Etario = '-';
UPDATE cliente SET Rango_Etario = '5_Desde 60 años' WHERE Edad > 60 AND Rango_Etario = '-';
```

6. Crea el modelo relacional en Power BI.

### Proyecto de visualización. 

Con la información de la versión final obtenido a partir del modelo de la clase anterior (incluidos punto 4, 5 y 6 actual), crea un informe que tenga las siguientes características. Recuerda implementar las prácticas recomendadas en clasea anteriores.
- Barras de Venta Trimestral.
- Barras agrupadas por Canal de Venta Trimestral
- Barras apiladas por Canal de Venta Trimestral
- Barras apiladas al 100% por Canal de Venta Trimestral
- Treemap de Ventas por Sucursal y Ventas por Provincia y Localidad de la Sucursal
- Áreas y áreas apliadas de Tipos de Gastos Mensual
- Líneas de Compras Trimestral y Lineal. ¿Hay alguna correlación?
- Barras y líneas combinado mostrando Compras por Tipo de Producto 
- Radar para Gastos y otro Radar para Ventas, ambos por Sucursal
# Clase 05 - Conceptos básicos de DAX en Power BI Desktop

[Tutorial DAX](https://docs.microsoft.com/en-us/dax/)

Al utilizar Power BI para crear informes sencillos, puede que no sea necesario realizar un cálculo de medidas. Solo con arrastar el campo, Power BI da una serie de opciones de cálculo rápido tales como: suma, cuenta, promedio, máximo mínimo. También puede acceder a la opción de cálculo de "médidas rápidas": 
[Medidas rápidas en Power BI](https://docs.microsoft.com/es-es/power-bi/transform-model/desktop-tutorial-create-measures) 

Lo cierto es que si pretende realizar análisis complejos en el modelo desarrollado, será muy importante familirizarse con la sintaxis de DAX.

DAX es una colección de funciones, operadores y constantes que se pueden usar en una fórmula o expresión para calcular y devolver uno o más valores. Dicho de manera más simple, DAX le ayuda a crear nueva información a partir de datos que ya están en su modelo.

Es fácil crear un nuevo archivo de Power BI Desktop e importar algunos datos en él. Incluso puede crear informes que muestren información valiosa sin usar ninguna fórmula DAX. Pero, ¿qué pasa si necesita analizar el porcentaje de crecimiento en todas las categorías de productos y para diferentes rangos de fechas? ¿O necesita calcular el crecimiento año tras año en comparación con las tendencias del mercado? Las fórmulas DAX proporcionan esta capacidad y muchas otras capacidades importantes también. Aprender a crear fórmulas DAX efectivas le ayudará a sacar el máximo provecho de sus datos. Cuando obtenga la información que necesita, puede comenzar a resolver problemas comerciales reales que afectan sus resultados. Este es el poder de Power BI, y DAX le ayudará a llegar allí.

Existen tres conceptos fundamentales relacionados a DAX: sintaxis, funciones y contexto. Hay otros conceptos importantes en DAX, pero comprender estos tres conceptos proporcionará la mejor base sobre la cual desarrollar sus habilidades de DAX.

## Sintaxis
Antes de crear sus propias fórmulas, echemos un vistazo a la sintaxis de la fórmula DAX. La sintaxis incluye los diversos elementos que componen una fórmula, o más simplemente, cómo se escribe la fórmula. Por ejemplo, aquí hay una fórmula DAX simple para una medida:

![DAX](https://docs.microsoft.com/en-us/power-bi/transform-model/media/desktop-quickstart-learn-dax-basics/qsdax_1_syntax.png)

Esta fórmula incluye los siguientes elementos de sintaxis:

- A. El nombre de la medida, Ventas totales.
- B. El operador de signo igual (=), que indica el comienzo de la fórmula. Cuando se calcula, devolverá un resultado.
- C. La función DAX SUM, que suma todos los números de la columna Sales[SalesAmount].
- D. Paréntesis (), que rodean una expresión que contiene uno o más argumentos. La mayoría de las funciones requieren al menos un argumento. Un argumento pasa un valor a una función.
- E. La tabla a la que se hace referencia, Ventas.

Al tratar de entender una fórmula DAX, a menudo es útil desglosar cada uno de los elementos en un idioma que piense y hable todos los días. Por ejemplo, puede leer esta fórmula como:

Para la medida denominada Ventas totales, calcule (=) la SUMA de valores en la columna [SalesAmount ] de la tabla Ventas.

## Medidas rápidas vs medidas cálculadas

Es posible que pienses: "¿No está esta medida haciendo lo mismo que si simplemente agregara el campo SalesAmount a mi informe?" Bueno, sí. Pero, hay una buena razón para crear nuestra propia medida que resume los valores del campo SalesAmount: podemos usarlo como argumento en otras fórmulas. Esto puede parecer un poco confuso ahora, pero a medida que sus habilidades con la fórmula DAX crecen, conocer esta medida hará que sus fórmulas y su modelo sean más eficientes.

## Funciones

DAX incluye las siguientes categorías de funciones: Fecha y hora, Inteligencia de tiempo, Información, Lógica, Matemática, Estadística, Texto, Padre/Hijo y Otras funciones. Si está familiarizado con las funciones de las fórmulas de Excel, muchas de las funciones de DAX le parecerán similares; sin embargo, las funciones de DAX son únicas de las siguientes maneras:

Una función DAX siempre hace referencia a una columna completa o a una tabla. Si desea utilizar sólo valores concretos de una tabla o columna, puede agregar filtros a la fórmula.

Si necesita personalizar los cálculos fila por fila, DAX proporciona funciones que le permiten utilizar el valor de fila actual o un valor relacionado como una especie de argumento, para realizar cálculos que varían según el contexto. Aprenderás más sobre el contexto más adelante.

DAX incluye muchas funciones que devuelven una tabla en lugar de un valor. La tabla no se muestra, pero se utiliza para proporcionar entrada a otras funciones. Por ejemplo, puede recuperar una tabla y, a continuación, contar los distintos valores que contiene, o calcular sumas dinámicas en tablas o columnas filtradas.

DAX incluye una variedad de funciones de inteligencia de tiempo. Estas funciones le permiten definir o seleccionar intervalos de fechas y realizar cálculos dinámicos basados en ellos. Por ejemplo, puede comparar sumas entre períodos paralelos.

Excel tiene una función popular, BUSCARV. Las funciones DAX no toman una celda o un rango de celdas como referencia como lo hace BUSCARV en Excel. Las funciones DAX toman una columna o una tabla como referencia. Tenga en cuenta que en Power BI Desktop está trabajando con un modelo de datos relacional. Buscar valores en otra tabla es fácil, y en la mayoría de los casos no es necesario crear ninguna fórmula en absoluto.

Como puede ver, las funciones de DAX pueden ayudarle a crear fórmulas potentes. Realmente solo tocamos los conceptos básicos de las funciones. A medida que sus habilidades de DAX crecen, creará fórmulas utilizando muchas funciones diferentes. Uno de los mejores lugares para obtener detalles sobre cada una de las funciones de DAX es en la Referencia de funciones de DAX.


## Crear columnas calculadas en Power BI Desktop

A veces los datos que está analizando no contienen un determinado campo necesario para obtener los resultados buscados. Aquí es donde entran en escena las columnas calculadas. Las columnas calculadas utilizan fórmulas de expresiones de análisis de datos (DAX) para definir los valores de una columna, cualquier cosa desde poner juntos valores de texto de un par de columnas diferentes hasta calcular un valor numérico a partir de otros valores. Por ejemplo, supongamos que sus datos tienen los campos Ciudad y Estado, pero desea un único campo Ubicación que tenga ambos, como "Miami, Florida". Para esto es precisamente que sirven las columnas calculadas.

Las columnas calculadas son similares a las medidas en que ambas se basan en fórmulas DAX, pero difieren en cómo se usan. A menudo se usan medidas en el área Valores de una visualización para calcular los resultados en función de otros campos. Las columnas calculadas se usan como nuevos Campos en filas, ejes, leyendas y áreas de grupos de visualizaciones.

### [Creación de una columna calculada con valores de tablas relacionadas](https://docs.microsoft.com/es-es/power-bi/transform-model/desktop-tutorial-create-calculated-columns#create-a-calculated-column-with-values-from-related-tables)

### [Columna cálculada con IF](https://docs.microsoft.com/es-es/power-bi/transform-model/desktop-tutorial-create-calculated-columns#create-a-calculated-column-that-uses-an-if-function)

## Contexto de las fórmulas DAX

[Contextos](https://support.microsoft.com/es-es/office/contexto-de-las-f%C3%B3rmulas-dax-2728fae0-8309-45b6-9d32-1d600440a7ad#:~:text=El%20contexto%20le%20permite%20realizar,y%20tambi%C3%A9n%20los%20datos%20relacionados.)

Si bien el siguiente extracto corresponde a documentación oficial de Power Pivot, los conceptos aplican a Power BI debido a que este software de BI se origina mediante la combinación de Power Pivot, Power Query y Power View.

El contexto le permite realizar análisis dinámicos, en los que los resultados de una fórmula pueden cambiar para reflejar la selección de fila o celda actual, y también los datos relacionados. Entender lo que es el contexto y usarlo eficazmente es muy importante para generar fórmulas muy eficaces, y para solucionar los posibles problemas de las fórmulas.

Los diferentes tipos de contexto son: contexto de la fila, contexto del filtro y contexto de transición (este último lo veremos más adelante). 

## Descripción de contexto

Las fórmulas de Power BI pueden verse afectadas por los filtros aplicados en un objeto visual, por relaciones entre las tablas y por filtros utilizados en fórmulas. El contexto es aquello que permite llevar a cabo análisis dinámicos.

El contexto de fila se puede entender como "la fila actual". Si ha creado una columna calculada, el contexto de la fila está formado por los valores de cada fila individual y los valores de las columnas que están relacionadas con la fila actual. También hay algunas funciones(EARLIER y EARLIEST) que obtienen un valor de la fila actual y, a continuación, usan ese valor mientras realizan una operación sobre toda una tabla.a.

El contexto de filtro es el conjunto de valores permitido en cada columna, basado en las restricciones de filtro que se aplicaron a la fila o que se han definido por expresiones de filtro dentro de la fórmula.

Activa la traducción automática y mira estos conceptos:

### [Contexto de fila](https://www.youtube.com/watch?v=Nm9x83J-SBk)

### [Contexto de filtro](https://www.youtube.com/watch?v=lX2ztEh3tuA)


[Documentación DAX](https://docs.microsoft.com/en-us/power-bi/transform-model/desktop-quickstart-learn-dax-basics)

[Columnas calculadas](https://docs.microsoft.com/es-es/power-bi/transform-model/desktop-tutorial-create-calculated-columns)

## Funciones importantes de DAX

### CALCULATE

[Tutorial - CALCULATE](https://www.youtube.com/watch?v=6lcZ5J-2NRQ)

[Función CACULATE](https://docs.microsoft.com/en-us/dax/calculate-function-dax)

### FILTER

[Tutorial FILTER](https://www.youtube.com/watch?v=ISf41o1FF10)

[Función FILTER](https://docs.microsoft.com/en-us/dax/filter-function-dax)

### Inteligencia de tiempo

[PREVIOUSMONTH](https://docs.microsoft.com/en-us/dax/previousmonth-function-dax)

[PREVIOUSYEAR](https://docs.microsoft.com/en-us/dax/previousyear-function-dax)

[SAMEPERIODLASTYEAR](https://docs.microsoft.com/en-us/dax/sameperiodlastyear-function-dax)

[Tutorial ejemplo - Inteligencia de tiempo](https://www.youtube.com/watch?v=bmI8p8Z9ps4)

[Funciones de inteligencia de tiempo](https://docs.microsoft.com/en-us/dax/time-intelligence-functions-dax)

### [Funciones de agregación](https://docs.microsoft.com/en-us/dax/aggregation-functions-dax)

### [Funciones de tiempo](https://docs.microsoft.com/en-us/dax/date-and-time-functions-dax)

## Homework Clase 05
1. Utilizar el modelo creado en el M3 y cargalo mediante el conector de BD que corresponda (MySQL, SQL Server, etc). 
2. Crear un calendario utilizando la función [CALENDAR](https://docs.microsoft.com/en-us/dax/calendar-function-dax)
